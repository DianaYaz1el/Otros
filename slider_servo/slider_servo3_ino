  //GNU nano 8.4                                                                                                                   slider_servo.ino
#include <Servo.h>

Servo s1, s2, s3;
const int PIN_S1 = 9;
const int PIN_S2 = 10;
const int PIN_S3 = 11;

void moverServo(int id, int ang){
  ang = constrain(ang, 0, 180);
  if(id == 1) s1.write(ang);
  else if(id == 2) s2.write(ang);
  else if(id == 3) s3.write(ang);
}

void setup() {
  Serial.begin(9600);

  s1.attach(PIN_S1);
  s2.attach(PIN_S2);
  s3.attach(PIN_S3);

  moverServo(1, 90);
  moverServo(2, 90);
  moverServo(3, 90);

  Serial.println("Listo. Envia: id ang  (ej: 2 135) o id,ang (ej: 2,135)");
}

void loop() {
  if (Serial.available() > 0) {
    String line = Serial.readStringUntil('\n');
    line.trim();
    if(line.length() == 0) return;

    line.replace(",", " ");     // acepta coma
    int id = 0, ang = 0;

    // parse simple: "id ang"
    int sp = line.indexOf(' ');
    if (sp < 0) return;

    id = line.substring(0, sp).toInt();
    ang = line.substring(sp + 1).toInt();

    if(id >= 1 && id <= 3 && ang >= 0 && ang <= 180){
      moverServo(id, ang);
      Serial.print("OK ");
      Serial.print(id);
      Serial.print(" ");
      Serial.println(ang);
    } else {
      Serial.println("Dato invalido. id 1-3, ang 0-180");
    }
  }
}



